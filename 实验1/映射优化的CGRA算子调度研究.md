# 映射优化的CGRA算子调度研究

## 问题A

###	1.1 背景描述

1. 可重构计算阵列CGRA
2. 时间拓展的CGRA（TEC）
3. 循环软件流水
4. CGRA上的模调度





**硬件功能单元（FU）资源有限**

- 每个时钟周期每个功能单元只能执行一个算子

- 只有 K 个加法器的时候，同一个时钟周期执行的加法数量不超过 K

**DFG 中的资源约束调度问题**

- 给定每种计算类型的功能单元的数量，最小化延时

- NP-Hard 问题





### 1.2 假设

资源类型只有一种（即PE资源），PE的数量为16，每个 PE 支持给定 DFG 中的任意算子，给定目标II



###	1.3 目标

通过算子调度最小化 PE 的使用数量（即调度后kernel最宽的地方的宽度）



###	1.4 已知条件

| 名称      | 条件值 |
| --------- | ------ |
| PE        | 16     |
| 目标最小Ⅱ | 已知   |




###	1.5 约束

- 依赖约束：保证依赖的算子的先后顺序

- 资源约束：TEC 中同一层的算子数量不超过 PE 的数量

- 依赖长度约束：没有依赖长度等于II或II倍数的依赖



###	1.6	符号定义

| 符号 | 说明 |
| ---- | ---- |
|      |      |



###	1.7 建模过程

####	变量定义

定义二元决策变量：

- $x_{ik}=1$表示算子$i$在控制步骤$T=k$开始执行
- $i$的范围是$[1, N]$，其中$N$表示算子的总数（可知）
- $k$的范围是$[1, L]$，其中$L$表示延时的上限

- 定义$t_i$表示算子$i$的起始时间，计算公式如下：

$$
t_I = \sum_{k=1}^{L}(kx_{ik})
$$





####	约束定义

##### 唯一起始时间约束

$i \in [1, N]$

#####	依赖约束



#####	资源约束



#####	依赖长度约束





####	目标函数定义



####	补充定义



###	1.8 结果



###	1.9 结果分析







